Load Testing
============

# What is load testing?

# Why load test?

# Load testing tools

- Apache bench
- Siege
- Locust
- Gatling
- The grinder
- Loadstorm
- Blitz
- many more

Side note: I've created a little helper tool for those of you writing your own
load testing tools and struggling to find a good name. Just click the button below
for inspiration

<create and insert random silly load testing name generator>


## Some load testing definitions

Before we dive in, I've assembled a bit of a glossary of terms.

### n = number of requests
Number of requests to execute

### c = concurrency
Maximum number of requests that can be executing at the same time

### rps = requests per second
How many (on average) requests per second were executed

### tpr = time per request
How long each request takes to execute. Page load time.
could be a partially server performance and partially code/page performance/size.

### ttoi = total time of impact
Total time of impact on the server the load test had (in seconds).

## Formulae

### rps - n / tpr / c

#### Example:
- tpr=1 n=1000 c=100 so rps=10
- tpr=0.5 n=1000 c=100 so rps=20

### ttoi - (tpr * n) / c

#### Example:
- tpr=1 n=1 c=1 so ttoi=1
- tpr=2 n=1 c=1 so ttoi=1
- tpr=2 n=10 c=1 so ttoi=20
- tpr=0.5 n=10 c=10 so ttoi=0.5

## Measuring requests

- requests per second
-

## Measuring concurrent users

- initial request
- subsequent requests limited to ~5 concurrent
- cdns, caches etc vs hits on the server

## Gotchas

- rate limiting
- apache concurrent connections limit
- server anti ddos prevention measures

## How we calculate 1 concurrent user

When a user hits the website their browser will request the initial page and once it has that
it will begin fetching all the static assests and other data it needs which it will do at a certain
maximum concurrent requests (depending on browser) We make certain assumptions about these additional
requests depending on which page is being requested.

### Region page
1 initial request /<regionname>
1 subsequent request to /<regionname>/regiondelays to get data for the map
All static assets such as css and javascript will in most cases be served from cache and are not counted.

### Journey page
1 initial request to /journey
1 request to /<regionname>/related
All static assets such as css and javascript will in most cases be served from cache and are not counted.

Formulae and terms:
===================

n = number of requests
Number of requests to execute

c = concurrency
Maximum number of requests that can be executing at the same time

rps = requests per second
How many (on average) requests per second were executed
Formula: n / tpr / c
Example:
tpr=1 n=1000 c=100 so rps=10
tpr=0.5 n=1000 c=100 so rps=20

tpr = time per request
How long each request takes to execute. Page load time.
could be a partially server performance and partially code/page performance/size.

ttoi = total time of impact
Total time of impact in seconds.
Formula: (tpr * n) \ c
Example:
tpr=1 n=1 c=1 so ttoi=1
tpr=2 n=1 c=1 so ttoi=1
tpr=2 n=10 c=1 so ttoi=20
tpr=0.5 n=10 c=10 so ttoi=0.5






## How we calculate 1 concurrent user

When a user hits the website their browser will request the initial page and once it has that
it will begin fetching all the static assests and other data it needs which it will do at a certain
maximum concurrent requests (depending on browser) We make certain assumptions about these additional
requests depending on which page is being requested.

### Region page
1 initial request /<regionname>
1 subsequent request to /<regionname>/regiondelays to get data for the map
All static assets such as css and javascript will in most cases be served from cache and are not counted.

### Journey page
1 initial request to /journey
1 request to /<regionname>/related
All static assets such as css and javascript will in most cases be served from cache and are not counted.

Formulae and terms:
===================

n = number of requests
Number of requests to execute

c = concurrency
Maximum number of requests that can be executing at the same time

rps = requests per second
How many (on average) requests per second were executed
Formula: n / tpr / c
Example:
tpr=1 n=1000 c=100 so rps=10
tpr=0.5 n=1000 c=100 so rps=20

tpr = time per request
How long each request takes to execute. Page load time.
could be a partially server performance and partially code/page performance/size.

ttoi = total time of impact
Total time of impact in seconds.
Formula: (tpr * n) \ c
Example:
tpr=1 n=1 c=1 so ttoi=1
tpr=2 n=1 c=1 so ttoi=1
tpr=2 n=10 c=1 so ttoi=20
tpr=0.5 n=10 c=10 so ttoi=0.5
